<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
<div>
    <div class="game-display">
        <div class="game-display-properties">
            <p><strong>Round</strong>: {{ game["round"] }}</p>
            <p><strong>State</strong>: {{ game["state"] }}</p>
            <p><strong>Character turn</strong>: {{ game["character_turn"] }}</p>
            {% if host and game["state"] == "created" %}
            <form action="{{ url_for('start_game', game_uuid=game['uuid'], player_uuid=player_uuid) }}" method="post">
                <div class="home-button">
                    <input type="submit" name="start" value="Start" class="game-buttons"/>
                </div>
            </form>
            {% endif %}
            {% if not host and game["state"] == "created" %}
            <p>Waiting for other players to join...</p>
            {% endif %}
        </div>

        <div class="vertical-line"></div>

        <div class="cards-display">
            {% for pic in game["removed_character_pics"] %}
            <img src="/static/images/characters/{{pic}}" alt="{{ pic }}" class="cards-img" title="{{ pic }}"/>
            {% endfor %}
        </div>
    </div>

    {% for player in players %}
    <hr>
    <div class="player-display">
        <div class="player-display-properties">
            <p><strong>Seat</strong>: {{ player["seat"] }}</p>
            <p><strong>Score</strong>: {{ player["score"] }}</p>
            <p><strong>Name</strong>: {{ player["name"] }}</p>
            <p><strong>Coins</strong>: {{ player["coins"] }}</p>
            <p><strong>King</strong>: {{ player["king"] }}</p>
            <p><strong>Protected</strong>: {{ player["protected"] }}</p>
            {% if player_uuid_select_expected == player["uuid"] and player_uuid != player["uuid"] %}
            <p><strong>Expected to select a character!</strong></p>
            {% endif %}
            <!--            {% if player["uuid"] == player_uuid and game["state"] == "selection_phase" or game["state"] == "turn_phase" %}-->
            <!--            <div class="dropdown">-->
            <!--                <button class="dropbtn">Actions</button>-->
            <!--                <div class="dropdown-content">-->
            <!--                    <a href="#">Link 1</a>-->
            <!--                    <a href="#">Link 2</a>-->
            <!--                    <a href="#">Link 3</a>-->
            <!--                </div>-->
            <!--            </div>-->
            <!--            {% endif %}-->
            {% if game["state"] == "selection_phase" and player["uuid"] == player_uuid and player["select_expected"] %}
            <form action="{{ url_for('select_character', game_uuid=game['uuid'], player_uuid=player_uuid, amount_players=game['amount_players'], player_king=player['king'], amount_removed_characters=amount_removed_characters) }}" method="post">
                <p>Pick a character for this round:</p>
                <select name="character-name">
                    {% for character in game['possible_characters'] %}
                    <option value="{{ character['name'] }}">{{ character['name'] }}</option>
                    {% endfor %}
                </select>
                {% if game["amount_players"] == 2 and not player['king'] or game["amount_players"] == 2 and amount_removed_characters > 1 %}
                <p>Pick a character to remove for this round:</p>
                <select name="character-remove">
                    {% for character in game['possible_characters'] %}
                    <option value="{{ character['name'] }}">{{ character['name'] }}</option>
                    {% endfor %}
                </select>
                {% endif %}
                <button type="submit">Select</button>
            </form>
            {% endif %}
        </div>

        <div class="vertical-line"></div>

        <div class="cards-display">
            {% for pic in player["character_pics"] %}
            <img src="/static/images/characters/{{pic}}" alt="{{ pic }}" class="cards-img" title="{{ pic }}"/>
            {% endfor %}
        </div>

        <div class="vertical-line"></div>

        <div class="cards-display">
            {% for pic in player["card_pics"] %}
            <img src="/static/images/districts/{{pic}}" alt="{{ pic }}" class="cards-img" title="{{ pic }}"/>
            {% endfor %}
        </div>

        <div class="vertical-line"></div>

        <div class="cards-display">
            {% for pic in player["building_pics"] %}
            <img src="/static/images/districts/{{pic}}" alt="{{ pic }}" class="cards-img" title="{{ pic }}"/>
            {% endfor %}
        </div>
        <div class="vertical"></div>
    </div>

    {% endfor %}
</div>
</body>
</html>